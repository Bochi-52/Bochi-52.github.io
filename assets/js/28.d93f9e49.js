(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{434:function(s,a,n){"use strict";n.r(a);var e=n(2),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"简述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简述"}},[s._v("#")]),s._v(" 简述")]),s._v(" "),a("p",[s._v("##1、项目的提出原因")]),s._v(" "),a("blockquote",[a("p",[s._v("现在计算机已经成为信息社会人们工作生活不可缺少的工具，拷贝文件、保存照片、收藏电影等等诸如此类的数据存储操作是计算机最基本的功能。在互联网与计算机密不可分的当今，用户进行各类文件存储、备份时，比起选择本地存储(如硬盘，U盘、光盘等)，更多的是利用互联网的丰富资源来存储和备份数据。由于主流平台对图片的上传要求具有严格的限制使部分用户的私人图片存储需求无法得到满足。")])]),s._v(" "),a("p",[s._v("##2、采用的技术方案\n"),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-dacd91a980dd8f18.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"技术方案"}}),s._v("\n#####2.1、前端技术\nVue框架、Element-UI组件库\n#####2.2、后端技术\nSpring Boot框架\n#####2.3、持久化技术\nMongoDB\n#####2.4、部署技术\nCentOS7.6、Docker容器")]),s._v(" "),a("h1",{attrs:{id:"详述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#详述"}},[s._v("#")]),s._v(" 详述")]),s._v(" "),a("blockquote",[a("p",[s._v("这个项目是为了应对期末考核而作。记录一下遇到的问题，这个项目并不完善，有诸多Bug。\n例如：目前还未解决的二级域名session失效的问题 等")])]),s._v(" "),a("p",[s._v("#1、前端\n开发工具"),a("code",[s._v("VsCode")]),s._v("\n前端使用"),a("code",[s._v("Vue框架")]),s._v(" + "),a("code",[s._v("Element-UI组件库")]),s._v(" 搭建\n使用"),a("code",[s._v("axios")]),s._v("实现前后端通信")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//axios示例\nconst _this=this;\naxios.get(_this.$global_msg.host+'/userInfo/detectUser').then(function(res){\n          _this.loginMsg=res.data\n          if(_this.loginMsg==\"请先登录\"){\n            _this.$confirm('登录后才能使用, 是否登录?', '提示', {\n              confirmButtonText: '登录',\n              cancelButtonText: '取消',\n              type: 'warning'\n            }).then(() => {\n              _this.$router.push('/register')\n            }).catch(() => { });\n          }else{\n            // 权限认证\n            axios.get(_this.$global_msg.host+'/userInfo/getCurrentUserPermissions').then(function(res){\n              if(res.data==2){\n                axios.delete(_this.$global_msg.host+'/user/deleteUser/'+row.id).then(function(res){\n                _this.$alert('用户：'+row.username+'  删除成功！','消息',{\n                          confirmButtonText:'确定',\n                          callback:action=>{\n                            window.location.reload();\n                          }\n                });\n                })\n              }else{\n                _this.$notify.error({\n                    title: '权限不足'\n                  });\n              }\n            })\n          }\n        })\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-2e67f128792920c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"图片展示页面"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-e4e4be004b4cd8af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"文件列表"}})]),s._v(" "),a("blockquote",[a("p",[s._v("问题：\n文件传输速度慢\n图片存储格式为Base64，可能因为每次都要解析，图片加载也很慢")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("//图片Base64示例\ncreated(){\n      this.url='data:image/png;base64,'+this.img_source\n    },\n    updated(){\n        this.url='data:image/png;base64,'+this.img_source\n    },\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("#2、后端\n开发工具"),a("code",[s._v("IntelliJ IDEA")]),s._v("\n接口测试工具"),a("code",[s._v("Postman")]),s._v("\n使用"),a("code",[s._v("SpringBoot框架")]),s._v(" + "),a("code",[s._v("Maven")]),s._v(" 搭建")]),s._v(" "),a("p",[a("code",[s._v("application.yml")]),s._v("配置文件")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("data")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("mongodb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" mongodb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("password@x.x.x.x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("27017/DatabaseName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("?")]),s._v("authSource=username\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("servlet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#做限制的参数配置")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("multipart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认支持文件上传")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-file-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1024MB "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最大支持文件大小")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("max-request-size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 1500MB "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最大支持请求大小")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("后端解决跨域问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('/**\n * @Author Xin\n * @Date 2022/5/1 22:21\n * @Description\n */\n@Configuration\npublic class CrosConfig implements WebMvcConfigurer {\n    @Override\n    public void  addCorsMappings(CorsRegistry registry){\n        registry.addMapping("/**")\n                .allowedOriginPatterns("*")\n                .allowedMethods("GET","HEAD","POST","PUT","DELETE","POTIONS")\n                .allowCredentials(true)\n                .maxAge(3600)\n                .allowedHeaders("*");\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("项目结构\n"),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-7b2d9eaa951bf5d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"目录结构"}})]),s._v(" "),a("p",[s._v("#3、数据库\n使用"),a("code",[s._v("MongoDB")]),s._v("\n可视化工具"),a("code",[s._v("MongoDB Compass")])]),s._v(" "),a("blockquote",[a("p",[s._v("MongoDB 默认直接连接，无须身份验证，如果当前机器可以公网访问，且不注意Mongodb 端口（默认 27017）的开放状态，那么Mongodb就会产生安全风险，被利用此配置漏洞，入侵数据库。\n"),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-532a4edbefeabc7a.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"被删库"}}),s._v(" "),a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-9adaf693cc2358f4.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"哈哈哈哈，还会被敲诈"}})])]),s._v(" "),a("p",[a("strong",[s._v("所以需要 MongoDB 用户名密码登录")]),s._v("\n####1、起一个终端，运行下列命令")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('mongo\nuse admin\ndb.createUser(\n  {\n    user: "adminUser",\n    pwd: "adminPass",\n    roles: [ { role: "userAdminAnyDatabase", db: "admin" } ]\n  }\n)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("管理员创建成功，现在拥有了用户管理员\n用户名：adminUser\n密码：adminPass")])]),s._v(" "),a("p",[s._v("####2、Mongodb 用户验证登陆\n新建终端")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('mongo\nuse admin\ndb.auth("adminUser", "adminPass")\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("一定要先切到 "),a("code",[s._v("admin 库")]),s._v(" 在使用"),a("code",[s._v("db.auth")]),s._v("命令")])]),s._v(" "),a("p",[s._v("####3、创建普通用户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('db.createUser(\n  {\n    user: "simpleUser",\n    pwd: "simplePass",\n    roles: [ { role: "readWrite", db: "test1" },\n             { role: "read", db: "test2" } ]\n  }\n)\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("现在有了一个普通用户\n用户名：simpleUser\n密码：simplePass\n权限：读写数据库 test1， 只读数据库 test2。")])]),s._v(" "),a("p",[s._v("#####常用权限")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Read：允许用户读取指定数据库\nreadWrite：允许用户读写指定数据库\ndbAdmin：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile\nuserAdmin：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户\nclusterAdmin：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限。\nreadAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限\nreadWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限\nuserAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限\ndbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。\nroot：只在admin数据库中可用。超级账号，超级权限\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("#4、服务器\n服务器使用云服务器\n镜像："),a("code",[s._v("CentOS7.6-Docker20.10.5")]),s._v("\n远程连接工具："),a("code",[s._v("Xshell 7")]),s._v("、"),a("code",[s._v("Xftp 7")])]),s._v(" "),a("p",[s._v("#5、Docker 部署项目\n####1、搭建Mongo数据库")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull mongo\n\ndocker images  #查看镜像\n\n#创建容器\ndocker run --name mongo -d -p 27017:27017  -v mongo_db:/data/db  mongo --auth\n\ndocker ps -a #产看容器\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("--name 名字\n-d 后台运行\n-p 27017:27017 端口映射 "),a("code",[s._v("映射端口")]),s._v(":"),a("code",[s._v("原端口")]),s._v("\n-v 为设置容器的挂载目录，这里是将本机的"),a("code",[s._v("/data/mongo")]),s._v("目录挂载到容器中的"),a("code",[s._v("mongo_db")]),s._v("中，作为 mongodb 的存储目录\n--auth 使用用户名密码登录")])]),s._v(" "),a("p",[s._v("####2、搭建Springboot项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-eeee69678a70c7b9.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"目录结构"}})]),s._v(" "),a("p",[a("strong",[s._v("2.1打包项目为jar包")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-13c0bcd45083ba41.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"ImageServer-0.0.1-SNAPSHOT.jar"}})]),s._v(" "),a("p",[a("strong",[s._v("2.2编写Dockerfile")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('FROM jdk:8\n# 作者\nMAINTAINER xin\n# VOLUME 指定了临时文件目录为/tmp。\n# 其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp\nVOLUME /tmp \n# 将jar包添加到容器中并更名为app.jar\nADD ImageServer-0.0.1-SNAPSHOT.jar app.jar \n# 运行jar包\nRUN bash -c \'touch /app.jar\'\nENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[a("strong",[s._v("2.3把文件传到服务器同一目录下")])]),s._v(" "),a("p",[a("strong",[s._v("2.4生成镜像")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker build -t 为镜像命名 . \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("最后面的"),a("code",[s._v(".")]),s._v("为Dockerfile文件所在地")])]),s._v(" "),a("p",[a("strong",[s._v("2.5启动容器")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -d --name 为容器命名 -p 8080:8080 镜像名\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("####3、搭建Vue项目")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/27770120-9a8e7122516f98de.PNG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"目录结构"}})]),s._v(" "),a("p",[a("strong",[s._v("3.1将 vue 项目打包，将打包后的 dist 文件上传到服务器")])]),s._v(" "),a("p",[a("strong",[s._v("3.2编写Dockerfile")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("FROM nginx\nMAINTAINER xin\nCOPY . /usr/share/nginx/html/\nCOPY Nginx/default.conf /etc/nginx/conf.d/default.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("3.3编写 nginx 的配置文件 default.conf")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("server {\nlisten       80;\nserver_name  localhost;\n#charset koi8-r;\naccess_log  /var/log/nginx/host.access.log  main;\nerror_log  /var/log/nginx/error.log  error;\nlocation / {\n    root   /usr/share/nginx/html;\n    index  index.html index.htm;\n}\n#error_page  404              /404.html;\n# redirect server error pages to the static page /50x.html\n#\nerror_page   500 502 503 504  /50x.html;\nlocation = /50x.html {\n    root   /usr/share/nginx/html;\n}\n} \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("#6、域名")]),s._v(" "),a("p",[s._v("懒得写了，，有空再补上")])])}),[],!1,null,null,null);a.default=t.exports}}]);