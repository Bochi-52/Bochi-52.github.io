<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>网络拓扑设计 | xin-blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="A simple and convenient personal blog .">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e853742c.css" as="style"><link rel="preload" href="/assets/js/app.4f6909ee.js" as="script"><link rel="preload" href="/assets/js/3.c9b02db4.js" as="script"><link rel="preload" href="/assets/js/1.381cc6bf.js" as="script"><link rel="preload" href="/assets/js/30.f5612bc7.js" as="script"><link rel="prefetch" href="/assets/js/10.e625287c.js"><link rel="prefetch" href="/assets/js/11.86778a36.js"><link rel="prefetch" href="/assets/js/12.d63dd04f.js"><link rel="prefetch" href="/assets/js/13.e74929e4.js"><link rel="prefetch" href="/assets/js/14.1ec5a732.js"><link rel="prefetch" href="/assets/js/15.a70b42e5.js"><link rel="prefetch" href="/assets/js/16.7dd7b37b.js"><link rel="prefetch" href="/assets/js/17.00aed8e7.js"><link rel="prefetch" href="/assets/js/18.314a60e0.js"><link rel="prefetch" href="/assets/js/19.b11337ba.js"><link rel="prefetch" href="/assets/js/20.70ac004e.js"><link rel="prefetch" href="/assets/js/21.09abe312.js"><link rel="prefetch" href="/assets/js/22.356effe9.js"><link rel="prefetch" href="/assets/js/23.40c3ffed.js"><link rel="prefetch" href="/assets/js/24.9e23268a.js"><link rel="prefetch" href="/assets/js/25.a7cc0183.js"><link rel="prefetch" href="/assets/js/26.afd00b87.js"><link rel="prefetch" href="/assets/js/27.a42d0632.js"><link rel="prefetch" href="/assets/js/28.d93f9e49.js"><link rel="prefetch" href="/assets/js/29.b8fee15a.js"><link rel="prefetch" href="/assets/js/31.be55527f.js"><link rel="prefetch" href="/assets/js/32.eb9d4fd2.js"><link rel="prefetch" href="/assets/js/4.144f8488.js"><link rel="prefetch" href="/assets/js/5.b9c9f148.js"><link rel="prefetch" href="/assets/js/6.dfabdedb.js"><link rel="prefetch" href="/assets/js/7.11ec3e97.js"><link rel="prefetch" href="/assets/js/8.721bd0a8.js"><link rel="prefetch" href="/assets/js/9.e1946b60.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e853742c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>xin-blog</h3> <p class="description" data-v-59e6cb88>A simple and convenient personal blog .</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xin</span>
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="xin-blog" class="logo"> <span class="site-name">xin-blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/使用指南/" class="nav-link"><i class="undefined"></i>
  使用指南
</a></li><li class="dropdown-item"><!----> <a href="/categories/课堂练习/" class="nav-link"><i class="undefined"></i>
  课堂练习
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  记录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode.cn" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  leetcode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    xin
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>22</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>22</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/使用指南/" class="nav-link"><i class="undefined"></i>
  使用指南
</a></li><li class="dropdown-item"><!----> <a href="/categories/课堂练习/" class="nav-link"><i class="undefined"></i>
  课堂练习
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  记录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://leetcode.cn" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  leetcode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>网络拓扑设计</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>xin</span>
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">网络拓扑设计</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>xin</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>12/12/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>网络</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="计算机网络-拓扑设计"><a href="#计算机网络-拓扑设计" class="header-anchor">#</a> 计算机网络--拓扑设计</h1> <h2 id="valn划分"><a href="#valn划分" class="header-anchor">#</a> VALN划分</h2> <p>如图</p> <h2 id="配置内网-vlan"><a href="#配置内网-vlan" class="header-anchor">#</a> 配置内网 VLAN</h2> <h3 id="lsw1配置"><a href="#lsw1配置" class="header-anchor">#</a> LSW1配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
un in en	//禁止提示信息弹出
sys LSW1
vlan 10
vlan 20
quit

int e0/0/1
un sh
port link-type a
port de vlan 10

int e0/0/2
un sh
port link-type a
port de vlan 20

int e0/0/3
port link-type t
port t allow vlan all

int e0/0/4
port link-type t
port t allow vlan all
quit

&lt;LSW1&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="lsw2配置"><a href="#lsw2配置" class="header-anchor">#</a> LSW2配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
un in en	//禁止提示信息弹出
sys LSW2
vlan 30
vlan 40
quit

int e0/0/1
un sh
port link-type a
port de vlan 30

int e0/0/2
un sh
port link-type a
port de vlan 40

int e0/0/3
port link-type t
port t allow vlan all

int e0/0/4
port link-type t
port t allow vlan all
quit

&lt;LSW2&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="lsw3配置"><a href="#lsw3配置" class="header-anchor">#</a> LSW3配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
sys LSW3
vlan 10
vlan 20
vlan 30
vlan 40
vlan 50
vlan 60
quit

int g0/0/1
port link-t t
port t allow vlan all
int g0/0/2
port link-t t
port t allow vlan all
int g0/0/3
port link-t t
port t allow vlan all
int g0/0/4
port link-t a
port de vlan 60
int g0/0/5
port link-t a
port de vlan 50
quit

int vlan 10
ip add 192.168.10.1 24
int vlan 20
ip add 192.168.20.1 24
int vlan 30
ip add 192.168.30.1 24
int vlan 40
ip add 192.168.40.1 24
int vlan 50
ip add 192.168.50.1 24
int vlan 60
ip add 192.168.60.1 24
quit

&lt;LSW3&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="lsw4配置"><a href="#lsw4配置" class="header-anchor">#</a> LSW4配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
sys LSW4
vlan 10
vlan 20
vlan 30
vlan 40
vlan 50
vlan 70
quit

int g0/0/1
port link-t t
port t allow vlan all
int g0/0/2
port link-t t
port t allow vlan all
int g0/0/3
port link-t t
port t allow vlan all
int g0/0/4
port link-t a
port de vlan 70
quit

int vlan 10
ip add 192.168.10.2 24
int vlan 20
ip add 192.168.20.2 24
int vlan 30
ip add 192.168.30.2 24
int vlan 40
ip add 192.168.40.2 24
int vlan 50
ip add 192.168.50.2 24
int vlan 70
ip add 192.168.70.2 24
quit

&lt;LSW4&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="配置内网-dhcp"><a href="#配置内网-dhcp" class="header-anchor">#</a> 配置内网 DHCP</h2> <h3 id="lsw3配置-2"><a href="#lsw3配置-2" class="header-anchor">#</a> LSW3配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dhcp en
ip pool vlan10	//创建地址池
gatway-list 192.168.10.254	//虚拟网关
network 192.168.10.0 mask 24
exclued-ip-address 192.168.10.1 192.168.10.127	//排除地址段
quit
int vlan 10
dhcp select global

ip pool vlan20
gatway-list 192.168.20.254
network 192.168.20.0 mask 24
exclued-ip-address 192.168.20.1 192.168.20.127
quit
int vlan 20
dhcp select global

ip pool vlan30
gatway-list 192.168.30.254
network 192.168.30.0 mask 24
exclued-ip-address 192.168.30.1 192.168.30.127
quit
int vlan 30
dhcp select global

ip pool vlan40
gatway-list 192.168.40.254
network 192.168.40.0 mask 24
exclued-ip-address 192.168.40.1 192.168.40.127
quit
int vlan 40
dhcp select global
quit

&lt;LSW3&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="lsw4配置-2"><a href="#lsw4配置-2" class="header-anchor">#</a> LSW4配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dhcp en
ip pool vlan10	//创建地址池
gatway-list 192.168.10.254	//虚拟网关
network 192.168.10.0 mask 24
exclued-ip-address 192.168.10.128 192.168.10.253	//排除地址段
quit
int vlan 10
dhcp select global

ip pool vlan20
gatway-list 192.168.20.254
network 192.168.20.0 mask 24
exclued-ip-address 192.168.20.128 192.168.20.253
quit
int vlan 20
dhcp select global

ip pool vlan30
gatway-list 192.168.30.254
network 192.168.30.0 mask 24
exclued-ip-address 192.168.30.128 192.168.30.253
quit
int vlan 30
dhcp select global

ip pool vlan40
gatway-list 192.168.40.254
network 192.168.40.0 mask 24
exclued-ip-address 192.168.40.128 192.168.40.253
quit
int vlan 40
dhcp select global
quit

&lt;LSW4&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p><strong>PC 中 开启 DHCP</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ipconfig
ping 其他 PC 测试连通性
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="配置内网-stp-vrrp"><a href="#配置内网-stp-vrrp" class="header-anchor">#</a> 配置内网 STP+VRRP</h2> <h3 id="lsw1-2配置"><a href="#lsw1-2配置" class="header-anchor">#</a> LSW1/2配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
stp mode stp
quit
&lt;LSW1&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="lsw3配置-3"><a href="#lsw3配置-3" class="header-anchor">#</a> LSW3配置</h3> <div class="language-stp line-numbers-mode"><pre class="language-text"><code>sys
stp mode stp
stp priority 0

int vlan 10
vrrp vrid 10 vi 192.168.10.254	//虚拟网关
vrrp vrid 10 prio 120
vrrp vrid 10 track int g0/0/4 reduced 30

int vlan 20
vrrp vrid 20 vi 192.168.20.254
vrrp vrid 20 prio 120
vrrp vrid 20 track int g0/0/4 reduced 30

int vlan 30
vrrp vrid 30 vi 192.168.30.254

int vlan 40
vrrp vrid 40 vi 192.168.40.254
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="lsw4配置-3"><a href="#lsw4配置-3" class="header-anchor">#</a> LSW4配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
stp mode stp
stp priority 4096

int vlan 10
vrrp vrid 10 vi 192.168.10.254

int vlan 20
vrrp vrid 20 vi 192.168.20.254

int vlan 30
vrrp vrid 30 vi 192.168.30.254
vrrp vrid 30 prio 120
vrrp vrid 30 track int g0/0/4 reduced 30

int vlan 40
vrrp vrid 40 vi 192.168.40.254
vrrp vrid 40 prio 120
vrrp vrid 40 track int g0/0/4 reduced 30
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><blockquote><p>PC ping 其他 PC 测试连通性</p></blockquote> <p>Service1设置	54:31</p> <h2 id="配置路由-ospf"><a href="#配置路由-ospf" class="header-anchor">#</a> 配置路由 OSPF</h2> <h3 id="lsw3"><a href="#lsw3" class="header-anchor">#</a> LSW3</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dis ip int br
ospf 1
area 0.0.0.0
net 192.168.10.0 0.0.0.255
net 192.168.20.0 0.0.0.255
net 192.168.30.0 0.0.0.255
net 192.168.40.0 0.0.0.255
net 192.168.50.0 0.0.0.255
net 192.168.60.0 0.0.0.255
quit
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="lsw4"><a href="#lsw4" class="header-anchor">#</a> LSW4</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dis ip int br
ospf 1
area 0.0.0.0
net 192.168.10.0 0.0.0.255
net 192.168.20.0 0.0.0.255
net 192.168.30.0 0.0.0.255
net 192.168.40.0 0.0.0.255
net 192.168.50.0 0.0.0.255
net 192.168.70.0 0.0.0.255
quit
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="ar1"><a href="#ar1" class="header-anchor">#</a> AR1</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
un in en
sys AR1

int g0/0/0
ip add 192.168.60.100 24
int g 0/0/1
ip add 192.168.70.100 24
int g0/0/2
ip add 200.200.200.1 24
quit

dis ip int br

ospf 1
area 0.0.0.0
net 192.168.60.0 0.0.0.255
net 192.168.70.0 0.0.0.255
net 200.200.200.0 0.0.0.255
quit
ip route-static 0.0.0.0 0.0.0.0 200.200.200.100
ospf 1
default-route-advertise
quit
&lt;AR1&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="ar2"><a href="#ar2" class="header-anchor">#</a> AR2</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
un in en
sys AR2

int g0/0/0
ip add 200.200.200.100 24
int g 0/0/1
ip add 200.200.201.1 24
quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="pc5"><a href="#pc5" class="header-anchor">#</a> PC5</h3> <p>1:02:23</p> <h2 id="配置acl-nat"><a href="#配置acl-nat" class="header-anchor">#</a> 配置ACL+NAT</h2> <blockquote><p>vlan 10/30 可以访问外网</p> <p>50 单独一个公网IP</p></blockquote> <h3 id="ar1-2"><a href="#ar1-2" class="header-anchor">#</a> AR1</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sys
acl number 2000
rule 0 permit source 192.168.10.0 0.0.0.255
rule 5 permit source 192.168.30.0 0.0.0.255
rule 10 permit source 192.168.50.0 0.0.0.255
quit

int g0/0/2
nat outbound 2000
nat static global 200.200.200.10 inside 192.168.50.100
quit
&lt;AR1&gt; save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="lsw1"><a href="#lsw1" class="header-anchor">#</a> LSW1</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dis stp br
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="lsw3-2"><a href="#lsw3-2" class="header-anchor">#</a> LSW3</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>dis vrrp br
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#valn划分" class="sidebar-link reco-side-valn划分" data-v-b57cc07c>VALN划分</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#配置内网-vlan" class="sidebar-link reco-side-配置内网-vlan" data-v-b57cc07c>配置内网 VLAN</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw1配置" class="sidebar-link reco-side-lsw1配置" data-v-b57cc07c>LSW1配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw2配置" class="sidebar-link reco-side-lsw2配置" data-v-b57cc07c>LSW2配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw3配置" class="sidebar-link reco-side-lsw3配置" data-v-b57cc07c>LSW3配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw4配置" class="sidebar-link reco-side-lsw4配置" data-v-b57cc07c>LSW4配置</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#配置内网-dhcp" class="sidebar-link reco-side-配置内网-dhcp" data-v-b57cc07c>配置内网 DHCP</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw3配置-2" class="sidebar-link reco-side-lsw3配置-2" data-v-b57cc07c>LSW3配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw4配置-2" class="sidebar-link reco-side-lsw4配置-2" data-v-b57cc07c>LSW4配置</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#配置内网-stp-vrrp" class="sidebar-link reco-side-配置内网-stp-vrrp" data-v-b57cc07c>配置内网 STP+VRRP</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw1-2配置" class="sidebar-link reco-side-lsw1-2配置" data-v-b57cc07c>LSW1/2配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw3配置-3" class="sidebar-link reco-side-lsw3配置-3" data-v-b57cc07c>LSW3配置</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw4配置-3" class="sidebar-link reco-side-lsw4配置-3" data-v-b57cc07c>LSW4配置</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#配置路由-ospf" class="sidebar-link reco-side-配置路由-ospf" data-v-b57cc07c>配置路由 OSPF</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw3" class="sidebar-link reco-side-lsw3" data-v-b57cc07c>LSW3</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw4" class="sidebar-link reco-side-lsw4" data-v-b57cc07c>LSW4</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#ar1" class="sidebar-link reco-side-ar1" data-v-b57cc07c>AR1</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#ar2" class="sidebar-link reco-side-ar2" data-v-b57cc07c>AR2</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#pc5" class="sidebar-link reco-side-pc5" data-v-b57cc07c>PC5</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#配置acl-nat" class="sidebar-link reco-side-配置acl-nat" data-v-b57cc07c>配置ACL+NAT</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#ar1-2" class="sidebar-link reco-side-ar1-2" data-v-b57cc07c>AR1</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw1" class="sidebar-link reco-side-lsw1" data-v-b57cc07c>LSW1</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E6%8B%93%E6%89%91.html#lsw3-2" class="sidebar-link reco-side-lsw3-2" data-v-b57cc07c>LSW3</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.4f6909ee.js" defer></script><script src="/assets/js/3.c9b02db4.js" defer></script><script src="/assets/js/1.381cc6bf.js" defer></script><script src="/assets/js/30.f5612bc7.js" defer></script>
  </body>
</html>
